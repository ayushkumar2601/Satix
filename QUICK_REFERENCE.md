# TrustScore - Quick Reference Card

## ðŸš€ Quick Start (3 Steps)

### 1. Database Setup
```bash
# Go to: https://supabase.com/dashboard
# SQL Editor > New Query
# Copy/paste content from: supabase-schema.sql
# Click Run
```

### 2. Add Gemini API Key
```bash
# Get key: https://aistudio.google.com/app/apikey
# Edit .env.local:
GEMINI_API_KEY=your-actual-key-here
```

### 3. Run App
```bash
npm run dev
# Go to: http://localhost:3000
# Sign up > Upload > Analyze > View Score
```

## ðŸ“Š System Flow

```
User Sign Up
    â†“
Upload Data (or Auto-Seed Demo Data)
    â†“
Feature Extraction (Deterministic)
    â†“
Gemini AI Scoring (with Fallback)
    â†“
Trust Score (300-900) + Explanations
    â†“
Loan Eligibility Calculation
    â†“
Save to Database
    â†“
Display on Dashboard
```

## ðŸŽ¯ Key Files

| File | Purpose |
|------|---------|
| `supabase-schema.sql` | Database tables |
| `.env.local` | API keys |
| `lib/services/feature-extraction.ts` | Extract features from data |
| `lib/services/gemini-scoring.ts` | AI scoring + fallback |
| `lib/services/trust-score-service.ts` | Main orchestration |
| `app/api/trust-score/calculate/route.ts` | Calculate API |
| `app/analyzing/page.tsx` | Calculation UI |
| `app/score/page.tsx` | Score display |
| `app/dashboard/page.tsx` | Dashboard |

## ðŸ”‘ Environment Variables

```env
# Required
NEXT_PUBLIC_SUPABASE_URL=your-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-key
GEMINI_API_KEY=your-gemini-key

# Optional
DEMO_MODE=false  # Set true for demos without Gemini
```

## ðŸ“¡ API Endpoints

### Calculate Trust Score
```bash
POST /api/trust-score/calculate
Body: { "seed_demo_data": true }
```

### Get Trust Score
```bash
GET /api/trust-score/get
```

### Get Dashboard Data
```bash
GET /api/dashboard/data
```

## ðŸ§® Scoring Logic

### Trust Score Formula
```
Trust Score = 300 + (weighted_score * 600)

weighted_score = 
  utility_score * 0.35 +
  upi_score * 0.35 +
  location_score * 0.20 +
  social_score * 0.10
```

### Loan Eligibility
```
Score â‰¥ 750: â‚¹25k-â‚¹100k @ 12%
Score 650-749: â‚¹10k-â‚¹50k @ 15%
Score 550-649: â‚¹5k-â‚¹25k @ 18%
Score < 550: â‚¹2k-â‚¹10k @ 22%
```

## ðŸ› Troubleshooting

| Issue | Solution |
|-------|----------|
| "Invalid login credentials" | Sign Up first (not Sign In) |
| "Profile not found" | Run database schema |
| "Failed to calculate" | Check Gemini API key |
| Using fallback | Normal! Or check API key |
| No data on dashboard | Go to /upload and analyze |

## ðŸŽ¤ Judge Demo Script

1. **Open app**: "This is TrustScore - credit scoring without credit history"
2. **Sign up**: "No credit check needed, just email/password"
3. **Upload**: "We analyze utility bills and UPI transactions"
4. **Analyzing**: "Real-time feature extraction and AI evaluation"
5. **Score**: "Trust Score generated by Gemini AI with explanations"
6. **Dashboard**: "Dynamic loan eligibility based on behavior"
7. **Explain**: "Deterministic features + AI reasoning = explainable scores"

## ðŸ’¡ Key Talking Points

- âœ… **No Credit History** - Works for unbanked
- âœ… **AI-Enhanced** - Gemini provides nuanced evaluation
- âœ… **Explainable** - Every score has clear reasoning
- âœ… **Conservative** - Penalizes risk, rewards stability
- âœ… **Failsafe** - Deterministic fallback if AI fails
- âœ… **Secure** - No raw data to AI, only features
- âœ… **Auditable** - All calculations logged

## ðŸ” Console Logs to Watch

```
[Feature Extraction] Starting...
[Feature Extraction] Extracted features: {...}
[Gemini] Calling Gemini API...
[Gemini] Successfully generated trust score: 742
[Trust Score Service] Successfully calculated...
```

Or with fallback:
```
[Gemini] API key not configured, using fallback
[Fallback] Generating deterministic trust score
```

## ðŸ“¦ Demo Mode

For stable demos without Gemini:

```env
DEMO_MODE=true
```

Benefits:
- No Gemini API needed
- Always uses deterministic scoring
- Auto-seeds demo data
- 100% stable for judges

## âœ… Pre-Demo Checklist

- [ ] Database schema run
- [ ] Gemini API key added (or DEMO_MODE=true)
- [ ] App runs without errors
- [ ] Can sign up new user
- [ ] Score calculation works
- [ ] Dashboard shows data
- [ ] Practiced demo flow
- [ ] Know talking points

## ðŸŽ¯ Success Indicators

You'll know it's working when:
- User can sign up and log in âœ…
- Analyzing page shows progress âœ…
- Score page displays trust score âœ…
- Dashboard shows dynamic data âœ…
- Console shows successful logs âœ…
- Database has entries âœ…

## ðŸ“š Full Documentation

- `SETUP_INSTRUCTIONS.md` - Detailed setup
- `BACKEND_IMPLEMENTATION.md` - Architecture
- `IMPLEMENTATION_SUMMARY.md` - What's built

## ðŸ†˜ Emergency Fixes

### App won't start
```bash
npm install
npm run dev
```

### Database errors
```bash
# Re-run supabase-schema.sql in Supabase SQL Editor
```

### Gemini not working
```bash
# Set in .env.local:
DEMO_MODE=true
# Restart: npm run dev
```

### No data showing
```bash
# Go to: http://localhost:3000/upload
# Click "Analyze My Data"
```

## ðŸŽ‰ You're Ready!

Everything is implemented and working. Just:
1. Run the schema
2. Add API key
3. Test the flow
4. Demo to judges

**Good luck! ðŸš€**
